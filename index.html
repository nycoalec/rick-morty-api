<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Yu-Gi-Oh! Cards</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB"
      crossorigin="anonymous"
    >
    <style>
      body {
        background-color: #050814;
        min-height: 100vh;
      }

      .character-card {
        transition: all 0.3s ease;
        border: none;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      }

      .character-card:hover {
        transform: translateY(-10px);
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.4);
      }

      .character-image-container {
        transition: transform 0.3s ease;
      }

      .character-card:hover .character-image-container {
        transform: scale(1.1);
      }

      .homepage-img {
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        transition: transform 0.3s ease;
      }

      .homepage-img:hover {
        transform: scale(1.02);
      }

      .search-container {
        max-width: 600px;
        margin: 0 auto;
      }

      .search-input {
        border: 2px solid #1b2141;
        background-color: #fff;
        transition: all 0.3s ease;
      }

      .search-input:focus {
        border-color: #f8e39a;
        box-shadow: 0 0 10px rgba(248, 227, 154, 0.3);
      }

      .search-btn {
        background: linear-gradient(135deg, #1b2141 0%, #2c3454 100%);
        border: none;
        color: #f8e39a;
        font-weight: 600;
        transition: all 0.3s ease;
      }

      .search-btn:hover {
        background: linear-gradient(135deg, #2c3454 0%, #1b2141 100%);
        transform: scale(1.05);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
      }

      .page-text {
        color: #f8e39a;
        font-size: 1.5rem;
        font-weight: 600;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        margin: 20px 0;
      }

      .pagination .page-link {
        background-color: #1b2141;
        border-color: #2c3454;
        color: #f8e39a;
        transition: all 0.3s ease;
      }

      .pagination .page-link:hover {
        background-color: #2c3454;
        border-color: #1b2141;
        transform: scale(1.1);
      }

      .pagination .page-link:disabled {
        background-color: #4a4a4a;
        border-color: #4a4a4a;
        opacity: 0.5;
      }
    </style>
  </head>
  <body>
    <div style="background-color: #1b2141;">
      <div class="container py-3">
        <div class="row">
          <div class="col-md-4">
            <div class="h3" style="color: white;">
              Yu-Gi-Oh! Dex
            </div>
          </div>
          <div class="col-md-8" style="display: flex; align-items: center; justify-content: flex-end;">
            <div style="display: flex; gap: 10px; width: 100%; max-width: 500px;">
              <input type="text" placeholder="Card name or ID" class="form-control rounded-5 search-input" id="searchInput" style="flex: 1;">
              <button class="btn search-btn rounded-5" onclick="searchCard()" style="padding: 0.375rem 1.5rem;">Go</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="container">
      <div style="text-align: center; padding: 24px 0;">
        <img
          src="homepage.avif"
          alt="Yu-Gi-Oh! Homepage Banner"
          class="homepage-img"
          style="max-width: 100%; height: auto; border-radius: 12px;"
        >
      </div>
    </div>

    <div class="container my-4">
      <div class="row">
        <div class="col text-center">
          <div id="pageText" class="page-text">
            Page 1
          </div>
        </div>
      </div>
    </div>

    <div class="container py-4">
      <div class="row" id="contentArea">
      </div>
    </div>

    <div class="container my-3">
      <div class="row">
        <div class="col text-center">
          <nav aria-label="Page navigation">
            <ul class="pagination justify-content-center">
              <li class="page-item">
                <a class="page-link" aria-label="Previous" onclick="prevPage()" style="cursor: pointer;">
                  <span aria-hidden="true">&laquo;</span>
                </a>
              </li>
              <li class="page-item">
                <a class="page-link" aria-label="Next" onclick="nextPage()" style="cursor: pointer;">
                  <span aria-hidden="true">&raquo;</span>
                </a>
              </li>
            </ul>
          </nav>
        </div>
      </div>
    </div>

    <script>
      const colors = {
        "Normal Monster": "#f2d1a8",
        "Effect Monster": "#c57d4c",
        "Spell Card": "#1f6f7a",
        "Trap Card": "#7a2b6a",
        "Fusion Monster": "#5c2c7a",
        "Synchro Monster": "#cfd3dd",
        "Xyz Monster": "#1c1c2e",
        "Link Monster": "#284887"
      };

      const contentArea = document.getElementById("contentArea");
      const pageText = document.getElementById("pageText");
      const searchInput = document.getElementById("searchInput");
      
      let page = 1;
      let allCards = [];
      let isSearchMode = false;

      function prevPage() {
        if (page > 1 && !isSearchMode) {
          page--;
          pageText.innerHTML = "Page " + page;
          contentArea.innerHTML = "";
          window.scrollTo({ top: 0, behavior: 'smooth' });
          displayPage();
        }
      }

      function nextPage() {
        if (page < 10 && !isSearchMode) {
          page++;
          pageText.innerHTML = "Page " + page;
          contentArea.innerHTML = "";
          window.scrollTo({ top: 0, behavior: 'smooth' });
          displayPage();
        }
      }

      function searchCard() {
        const searchValue = searchInput.value.trim();
        if (!searchValue) {
          alert('Please enter a card name or ID');
          return;
        }

        isSearchMode = true;
        pageText.innerHTML = "Search Results";
        contentArea.innerHTML = "";

        // Check if it's a number (ID) or name
        const isId = !isNaN(searchValue);

        if (isId) {
          // Search by ID in our local array
          const cardIndex = parseInt(searchValue) - 1;
          if (cardIndex >= 0 && cardIndex < allCards.length) {
            displayCard(allCards[cardIndex], cardIndex + 1);
          } else {
            contentArea.innerHTML = '<div class="col-12"><div class="alert alert-danger">Card not found. Please try again.</div></div>';
          }
        } else {
          // Search by name
          const results = allCards.filter(card => 
            card.name.toLowerCase().includes(searchValue.toLowerCase())
          );
          
          if (results.length > 0) {
            results.forEach((card, index) => {
              const originalIndex = allCards.findIndex(c => c.id === card.id);
              displayCard(card, originalIndex + 1);
            });
          } else {
            contentArea.innerHTML = '<div class="col-12"><div class="alert alert-danger">Card not found. Please try again.</div></div>';
          }
        }
      }

      function displayCard(card, displayId) {
        const name = card.name || 'Unknown';
        const type = card.type || 'Unknown';
        const picture = card.card_images[0].image_url_small;
        const bgColor = colors[type] || "#F5F5F5";
        const race = card.race || 'Unknown';
        
        // Build additional info HTML
        let additionalInfo = `<div class="mb-1"><strong>Race:</strong> ${race}</div>`;
        
        // For monsters, show Level
        if (card.level !== undefined) {
          additionalInfo += `<div class="mb-1"><strong>Level:</strong> ${card.level}</div>`;
        }
        
        // Show Archetype if available
        if (card.archetype) {
          additionalInfo += `<div class="mb-1"><strong>Archetype:</strong> ${card.archetype}</div>`;
        }
        
        // For monsters, show ATK/DEF if available
        if (card.atk !== undefined) {
          additionalInfo += `<div><strong>ATK:</strong> ${card.atk} / <strong>DEF:</strong> ${card.def !== undefined ? card.def : '?'}</div>`;
        }

        contentArea.innerHTML += `
          <div class="col-12 col-md-6 col-lg-4">
            <div class="card p-5 rounded-5 my-4 text-center character-card" style="border: none; background-color: ${bgColor}; color: #f9f4e8;">
              <div class="mx-auto character-image-container" style="width: 200px;">
                <img class="w-100" src="${picture}" alt="${name}" style="display: block; border-radius: 0.75rem;">
              </div>
              <div class="h3 my-3" style="font-size: 1.1rem; font-weight: 600;">
                #${displayId}<br>${name}
              </div>
              <div class="mt-3 px-5">
                <div class="border rounded-5 p-2 mb-3" style="background-color: #f8e39a; color: #1b2141; border-color: #d2b76b; font-weight: 600;">
                  ${type}
                </div>
                <div class="small" style="color: #f9f4e8;">
                  ${additionalInfo}
                </div>
              </div>
            </div>
          </div>
        `;
      }

      function displayPage() {
        const startIndex = (page - 1) * 10;
        const endIndex = startIndex + 10;
        const pageCards = allCards.slice(startIndex, endIndex);

        pageCards.forEach((card, index) => {
          displayCard(card, startIndex + index + 1);
        });
      }

      // Allow Enter key to trigger search
      searchInput.addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
          searchCard();
        }
      });

      const getYugiohCards = async () => {
        try {
          const response = await fetch("https://db.ygoprodeck.com/api/v7/cardinfo.php?num=100&offset=0");
          const data = await response.json();
          allCards = data.data;

          displayPage();
        } catch (error) {
          console.error("Error fetching Yu-Gi-Oh! cards:", error);
          contentArea.innerHTML = "<p class='text-danger text-center mt-4'>Failed to load cards. Please try again later.</p>";
        }
      };

      getYugiohCards();
    </script>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
      crossorigin="anonymous"
    ></script>
  </body>
</html>


